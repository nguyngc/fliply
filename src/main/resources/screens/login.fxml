<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<StackPane xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="controller.LoginController"
           prefWidth="375" prefHeight="750"
           style="-fx-background-color: #D9F4F1;">

    <ScrollPane fitToWidth="true"
                fitToHeight="true"
                hbarPolicy="NEVER"
                vbarPolicy="AS_NEEDED"
                style="-fx-background: transparent; -fx-background-color: transparent;">
        <content>

            <!-- This VBox fills width and forces the white section to reach bottom -->
            <VBox spacing="0"
                  prefWidth="375">

                <!-- Top mint area with title -->
                <VBox spacing="10">
                    <padding>
                        <Insets top="70" right="26" bottom="22" left="26"/>
                    </padding>

                    <Label text="Log In"
                           style="-fx-text-fill: #3D8FEF; -fx-font-size: 32px; -fx-font-weight: 700;"/>

                    <Label text="Enter your login details to access your account"
                           wrapText="true"
                           style="-fx-text-fill: #8C8C8C; -fx-font-size: 14px; -fx-font-weight: 400;"/>
                </VBox>

                <!-- White section: FULL WIDTH + grows to bottom -->
                <VBox spacing="18"
                      VBox.vgrow="ALWAYS"
                      style="-fx-background-color: white;
                             -fx-background-radius: 26 26 0 0;">
                    <padding>
                        <Insets top="26" right="26" bottom="26" left="26"/>
                    </padding>

                    <!-- Email -->
                    <VBox spacing="8">
                        <Label text="Email"
                               style="-fx-text-fill: #8C8C8C; -fx-font-size: 14px; -fx-font-weight: 400;"/>

                        <TextField fx:id="emailField"
                                   promptText="Email"
                                   style="-fx-background-color: white;
                                          -fx-background-radius: 14;
                                          -fx-border-color: rgba(31, 31, 57, 0.20);
                                          -fx-border-radius: 10;
                                          -fx-padding: 10 15;
                                          -fx-font-size: 14px;"/>
                    </VBox>

                    <!-- Password -->
                    <VBox spacing="8">
                        <Label text="Password"
                               style="-fx-text-fill: #8C8C8C; -fx-font-size: 14px; -fx-font-weight: 400;"/>

                        <StackPane>
                            <PasswordField fx:id="passwordField"
                                           promptText="Password"
                                           style="-fx-background-color: white;
                                                  -fx-background-radius: 14;
                                                  -fx-border-color: rgba(31, 31, 57, 0.20);
                                                  -fx-border-radius: 10;
                                                  -fx-padding: 10 45 10 15;
                                                  -fx-font-size: 14px;"/>
                            <TextField fx:id="passwordTextField"
                                       promptText="Password"
                                       visible="false"
                                       managed="false"
                                       style="-fx-background-color: white;
                                              -fx-background-radius: 14;
                                              -fx-border-color: rgba(31, 31, 57, 0.20);
                                              -fx-border-radius: 10;
                                              -fx-padding: 10 45 10 15;
                                              -fx-font-size: 14px;"/>

                            <Button fx:id="togglePasswordBtn"
                                    focusTraversable="false"
                                    onAction="#togglePassword"
                                    StackPane.alignment="CENTER_RIGHT"
                                    style="-fx-background-color: transparent; -fx-cursor: hand;">
                                <graphic>
                                    <ImageView fx:id="eyeIcon"
                                               fitWidth="30"
                                               fitHeight="30"
                                               preserveRatio="true">
                                        <image>
                                            <Image url="@../images/eye_closed.png"/>
                                        </image>
                                    </ImageView>
                                </graphic>
                                <StackPane.margin>
                                    <Insets right="12"/>
                                </StackPane.margin>
                            </Button>

                        </StackPane>

                        <HBox alignment="CENTER_RIGHT">
                            <Hyperlink fx:id="forgotLink"
                                       text="Forget password?"
                                       onAction="#onForgotPassword"
                                       style="-fx-text-fill: #3D8FEF;
                                              -fx-font-size: 12px;
                                              -fx-font-weight: 600;"/>
                        </HBox>
                    </VBox>

                    <!-- Log In button -->
                    <Button fx:id="loginBtn"
                            text="Log In"
                            onAction="#login"
                            maxWidth="Infinity"
                            prefHeight="54"
                            style="-fx-background-color: #3D8FEF;
                                   -fx-background-radius: 10;
                                   -fx-text-fill: white;
                                   -fx-font-size: 16px;
                                   -fx-font-weight: 500;
                                   -fx-cursor: hand;"/>

                    <!-- Sign up row -->
                    <HBox alignment="CENTER" spacing="8">
                        <Label text="Don't have an account ?"
                               style="-fx-text-fill: #858597;
                                      -fx-font-size: 12px;
                                      -fx-font-weight: 400;"/>
                        <Hyperlink text="Sign up"
                                   onAction="#goRegister"
                                   style="-fx-text-fill: #3D8FEF;
                                          -fx-font-size: 12px;
                                          -fx-font-weight: 700;"/>
                    </HBox>

                    <!-- Divider (thin lines) -->
                    <HBox alignment="CENTER" spacing="12">
                        <Region prefWidth="105" prefHeight="1" minHeight="1" maxHeight="1"
                                style="-fx-background-color: #B8B8D2;"/>
                        <Label text="Or login with"
                               style="-fx-text-fill: #858597;
                                      -fx-font-size: 12px;
                                      -fx-font-weight: 400;"/>
                        <Region prefWidth="105" prefHeight="1" minHeight="1" maxHeight="1"
                                style="-fx-background-color: #B8B8D2;"/>
                    </HBox>

                    <!-- Google button centered -->
                    <HBox alignment="CENTER">
                        <Button fx:id="googleBtn"
                                onAction="#onGoogleLogin"
                                prefWidth="72" prefHeight="72"
                                style="-fx-background-color: transparent;
                                       -fx-border-color: transparent;
                                       -fx-cursor: hand;">
                            <graphic>
                                <ImageView fitWidth="64" fitHeight="64" preserveRatio="true">
                                    <image>
                                        <Image url="@../images/logo_google.png"/>
                                    </image>
                                </ImageView>
                            </graphic>
                        </Button>
                    </HBox>

                    <!-- Spacer so white area visually reaches bottom even if content is short -->
                    <Region VBox.vgrow="ALWAYS"/>
                </VBox>
            </VBox>

        </content>
    </ScrollPane>
</StackPane>
